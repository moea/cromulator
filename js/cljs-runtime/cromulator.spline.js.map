{"version":3,"sources":["cromulator/spline.cljs"],"mappings":"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","names":["cromulator.spline/pts->path","pts","cljs.core/flatten","cljs.core.into","cljs.core/first","iter__5523__auto__","s__26860","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__26862","cljs.core/chunk-buffer","i__26861","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__26859","cljs.core/chunk-rest","cljs.core/cons","cljs.core/rest","pt","v","p__26863","p__26864","p__26865","p__26866","vec__26867","cljs.core.nth","vec__26870","vec__26873","vec__26876","cromulator.spline/cubic","x0","y0","x1","y1","x2","y2","x3","y3","cromulator.spline/catmull-rom-curves","plen","maxi","butl","s__26880","b__26882","i__26881","vec__26883","iter__26879","vec__26887","i","p","cljs.core.map_indexed","cljs.core/vector","x__5130__auto__","y__5131__auto__","x__5133__auto__","y__5134__auto__","G__26886","cljs.core._EQ_","G__26890","cromulator.spline/catmull-rom-points","cljs.core.map","cljs.core.partial","cljs.core/take","cromulator.spline/catmull-rom-curved-path","vec__26891","vec__26894","x","y","curves","s__26898","b__26900","i__26899","iter__26897","cromulator.spline/catmull-rom-curved-seg","cljs.core.drop","cromulator.spline/catmull-rom-path","cljs.core/chunk-first"],"sourcesContent":["(ns cromulator.spline)\n\n(defn pts->path [pts]\n  (flatten\n   (into [(into [\"M\"] (first pts))]\n     (for [pt (rest pts)]\n       (into [\"L\"] pt)))))\n\n(let [v 6]\n  (defn- cubic [[x0 y0] [x1 y1] [x2 y2] [x3 y3]]\n    [(/ (+ (- x0)   (* v x1) x2)  v)\n     (/ (+ (- y0)   (* v y1) y2)  v)\n     (/ (+    x1 (- (* v x2) x3)) v)\n     (/ (+    y1 (- (* v y2) y3)) v)\n     x2\n     y2]))\n\n(defn catmull-rom-curves [pts]\n  (let [plen (count pts)\n        maxi (dec plen)\n        butl (dec maxi)]\n    (for [[i p] (map-indexed vector pts)]\n      (cubic\n       (nth pts (max (dec i) 0))\n       p\n       (nth pts (min (inc i) maxi))\n       (nth pts (case i butl butl (min (+ i 2) maxi)))))))\n\n(defn catmull-rom-points [pts]\n  (map (partial take 2) (catmull-rom-curves pts)))\n\n(defn catmull-rom-curved-path [pts]\n  (let [[[x y] :as curves] (catmull-rom-curves pts)]\n    (into [[\"M\" x y]]\n      (for [pt curves]\n        (into [\"C\"] pt)))))\n\n(defn catmull-rom-curved-seg [pts]\n  (drop 3 (catmull-rom-curved-path pts)))\n\n(defn catmull-rom-path [pts]\n  (pts->path (catmull-rom-points pts)))\n"]}