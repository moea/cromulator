{"version":3,"sources":["cromulator/geom.cljc"],"mappings":";AAIA,2BAAA,3BAAOA,8DAAUC,EAAEC,GAAGC,GAAGC,GAAGC,EAAEC,EAAEC;AAAhC,AACE,IAAMC,KAAG,WAAKC,EAAEC;AAAP,4DAAgBT,DAAE,KAAGM,NAAK,aAAA,1CAAQ,CAAA,iBAAAI,hCAAMC,fAAI,IAAAC,WAAA;QAAZJ,kCAAAA,4CAAAA,tFAAE,AAAA,0EAAAE,wBAAAA;OAAGN;IAAOS,WAAKJ;AAAL,AAAA,8GAAAG,SAAAC,0CAAAD,SAAAC,lKAACC,oDAAAA,uEAAAA;;IAChDC,IAAG,iBAAAC,WAAK,CAAG,AAACT,GAAGW,oBAAIhB,MAAI,AAACK,GAAGY,oBAAIhB;IAA5Bc,WAAiC,CAAA,MAAKhB;AAAtC,AAAA,8GAAAe,SAAAC,0CAAAD,SAAAC,lKAACH,oDAAAA,uEAAAA;;AADV,AAEE,GAAI,OAAA,NAAOC;AAAX,0FAAA,IAAA;;AAEE,OAACK,mDAAKC,iBAAE,CAAA,MAAKN,GAAG,CAACG,oDAAAA,yDAAAA,PAAIZ,qCAAAA,MAAK,CAACa,oDAAAA,yDAAAA,PAAIb,qCAAAA;;;AAErC,AAAA,sCAAA,8CAAAgB,pFAAMM;AAAN,AAAA,IAAAL,qBAAA;AAAA,AAAA,IAAAC,0BAAA,AAAA;AAAA,AAAA,IAAAC,wBAAA;;AAAA,AAAA,GAAA,CAAAA,wBAAAD;AAAA,AAAA,AAAAD,wBAAA,CAAA,UAAAE;;AAAA,eAAA,CAAAA,wBAAA;;;;AAAA;;;;AAAA,IAAAC,uBAAA,EAAA,CAAA,MAAA,AAAAH,4BAAA,AAAA,KAAAI,qBAAA,AAAAJ,yBAAA,KAAA,IAAA,OAAA;AAAA,AAAA,OAAAK,yEAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAAF;;;AAAA,AAAA,CAAA,2EAAA,kBAAAG,SAAAC,tGAAMF,sFAAqBe;AAA3B,AAAA,IAAAZ,aAAAF;IAAAE,iBAAA,AAAAC,4BAAAD;QAAA,AAAAE,4CAAAF,eAAA,/DAAmC/B;SAAnC,AAAAiC,4CAAAF,eAAA,hEAAwC9B;SAAxC,AAAAgC,4CAAAF,eAAA,hEAA+C7B;SAA/C,AAAA+B,4CAAAF,eAAA,hEAAsD5B;QAAtD,AAAA8B,4CAAAF,eAAA,/DAA6D3B;QAA7D,AAAA6B,4CAAAF,eAAA,/DAAkE1B;IAAlE6B,aAAAJ;IAAAK,aAAA,AAAAC,4CAAAF,WAAA,IAAA;IAAAC,iBAAA,AAAAH,4BAAAG;UAAA,AAAAF,4CAAAE,eAAA,iEAAA,lIAC+BS;AAD/B,AAEE,oDAAA,7CAACC,gIAAMF,eACL,AAACG,6CACA,AAACC,4CAAI,AAACC,gDAAQ3B,iBAAE,CAAG4B,sBAAIL,OACvB,AAACG,4CAAI,AAACC,uDAAQjD,yBAASC,EAAEC,GAAGC,qDAAGC,GAAGC,EAAEC,SACpC,AAAC0C,4CAAI,AAACC,gDAAQE,0BAAUC,iBAAER,UAC3B,AAACS,8CAAM,OAAA,NAAKR;;;AAPhB,CAAA,8DAAA,9DAAMhB;;AAAN;AAAA,CAAA,wDAAA,WAAAS,nEAAMT;AAAN,AAAA,IAAAU,WAAA,AAAAC,gBAAAF;IAAAA,eAAA,AAAAG,eAAAH;IAAAI,WAAA,AAAAF,gBAAAF;IAAAA,eAAA,AAAAG,eAAAH;AAAA,AAAA,IAAAK,qBAAA;AAAA,AAAA,OAAAA,wDAAAJ,SAAAG,SAAAJ;;;AAAA","names":["cromulator.geom/sf-point","m","n1","n2","n3","a","b","phi","xf","f","exp","G__33014","cljs.core/abs","G__33012","G__33013","cromulator.util/pow","r","G__33015","G__33016","cromulator.util/cos","cromulator.util/sin","cromulator.util.both","cljs.core/*","var_args","args__5775__auto__","len__5769__auto__","i__5770__auto__","argseq__5776__auto__","cljs.core/IndexedSeq","cromulator.geom/superformula-points","p__33020","p__33021","map__33022","cljs.core/--destructure-map","cljs.core.get","vec__33023","map__33026","cljs.core.nth","seq33017","G__33018","cljs.core/first","cljs.core/next","G__33019","self__5754__auto__","coords","res","cljs.core.into","cljs.core.comp","cljs.core.map","cljs.core.partial","cromulator.util/TAU","cromulator.util/pointwise","cljs.core/+","cljs.core.range"],"sourcesContent":["(ns cromulator.geom\n  (:require [cromulator.util\n             :refer [pointwise both TAU cos sin pow rad]]))\n\n(defn- sf-point [m n1 n2 n3 a b phi]\n  (let [xf (fn [f exp] (-> m (* phi) (/ 4) f (/ a) abs (pow exp)))\n        r  (pow (+ (xf cos n2) (xf sin n3)) (/ 1 n1))]\n    (if (zero? r)\n      [0 0]\n      (both * (/ 1 r) (cos phi) (sin phi)))))\n\n(defn superformula-points [coords {m :m n1 :n1 n2 :n2 n3 :n3 a :a b :b}\n                           & [{res :resolution :or {res 720}}]]\n  (into [coords]\n    (comp\n     (map (partial * (/ TAU res)))\n     (map (partial sf-point m n1 n2 n3 a b))\n     (map (partial pointwise + coords)))\n    (range (inc res))))\n"]}