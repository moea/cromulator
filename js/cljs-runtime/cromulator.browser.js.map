{"version":3,"sources":["cromulator/browser.cljs"],"mappings":"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","names":["cromulator.browser/uniform","v","lo","hi","x__5130__auto__","y__5131__auto__","js/Math","cljs.core.rand","cromulator.browser/bounds","cljs.core.into","cljs.core/sorted-map","cromulator.browser/initial-inputs","iter__5523__auto__","s__33116","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__33118","cljs.core/chunk-buffer","i__33117","vec__33119","cljs.core/-nth","cljs.core.nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__33115","cljs.core/chunk-rest","vec__33122","cljs.core/first","cljs.core/cons","cljs.core/rest","k","range'","cljs.core.apply","cromulator.browser/state","reagent.core.atom","cromulator.browser/event-value","e","cromulator.browser/sliders","s__33127","b__33129","i__33128","vec__33130","vec__33133","iter__33126","vec__33140","vec__33143","cljs.core/name","vec__33136","p1__33125#","vec__33146","lo-v","hi-v","G__33139","cljs.core/deref","G__33149","cljs.core.swap_BANG_","cljs.core/assoc-in","cromulator.browser/superformula-inputs","s__33151","b__33153","i__33152","vec__33154","iter__33150","vec__33157","W","H","var_args","args__5775__auto__","len__5769__auto__","i__5770__auto__","argseq__5776__auto__","cljs.core/IndexedSeq","cromulator.browser/superformula-path","p__33161","vec__33162","seq33160","self__5755__auto__","inputs","or__5045__auto__","map__33165","cljs.core/--destructure-map","cljs.core.get","pts","cromulator.geom/superformula-points","pth","js/module$node_modules$svg_path_commander$dist$svg_path_commander_min.roundPath","js/module$node_modules$svg_path_commander$dist$svg_path_commander_min.normalizePath","cljs.core/clj->js","cljs.core.partition","cromulator.spline/pts->path","w","h","x","y","cljs.core.js__GT_clj","js/module$node_modules$svg_path_commander$dist$svg_path_commander_min.getPathBBox","scale","G__33166","x__5133__auto__","y__5134__auto__","trans-x","cljs.core/abs","trans-y","js/module$node_modules$svg_path_commander$dist$svg_path_commander_min.transformPath","js/module$node_modules$svg_path_commander$dist$svg_path_commander_min.pathToString","p__33167","map__33168","vec__33169","vec__33172","vec__33175","cromulator.browser/superformula-svg","id0","id1","a0","a1","in0","in1","p0","cljs.core.partial","cljs.core/reset!","cromulator.browser.superformula_path","cromulator.browser/tweener","n1","n2","p1","t?","cb","and__5043__auto__","cljs.core/not","with-let33178","reagent.ratom/with-let-values","temp__5808__auto__","reagent.ratom/*ratom-context*","c__15983__auto__","reagent.debug/has-console","reagent.debug/tracking","reagent.debug/track-console","js/console","init33179","res33180","tween","js/module$node_modules$kute_DOT_js$dist$kute_min.to","cromulator.browser/home-page","with-let33181","init33182","res33183","iter","reagent.core/cursor","cljs.core/update","cljs.core/inc","cljs.core/mod","cromulator.browser/mount-root","reagent.dom.render","js/document","cromulator.browser/init!","cljs.core/chunk-first"],"sourcesContent":["(ns cromulator.browser\n  (:require [reagent.core    :as r]\n            [reagent.ratom]\n            [reagent.dom     :as d]\n            [react           :as react]\n            [cromulator.geom :as geom]\n            [\"svg-path-commander\" :as pc]\n            [\"kute.js\" :as kute]\n            [cromulator.spline :as spline]\n            [clojure.string  :as str]))\n\n(defn- uniform [v lo hi]\n  (max lo (.round js/Math (* (+ lo (- hi lo)) (rand)))))\n\n(def bounds (into (sorted-map)\n              {:a  [0.5   20]\n               :b  [0.5   20]\n               :m  [1     20]\n               :n1 [1     80]\n               :n2 [1     80]\n               :n3 [1     80]}))\n\n(defn- initial-inputs []\n  (into {}\n    (for [[k range'] bounds]\n      [k (apply uniform k range')])))\n\n(def state (r/atom {:inputs    [(initial-inputs) (initial-inputs)]\n                    :range     bounds\n                    :path-refs [nil nil]\n                    :tweening? false\n                    :iter      0}))\n\n(defn- event-value [e]\n  (-> e .-target .-value))\n\n(defn sliders []\n  (into [:div {:style {:position \"absolute\" :top 10 :left 10}}]\n    (for [[v [lo hi]] bounds]\n      [:div [:span {:style {:width \"2em\" :display \"inline-block\"}} (name v)]\n       [:span {:style {:width \"2em\" :display \"inline-block\"}} ]\n       (let [[lo-v hi-v] (-> @state :range v)]\n         [:span {:display \"inline-block\"}\n          [:span {:style {:width \"2em\" :display \"inline-block\"}} lo-v]\n          [:input {:type \"range\"\n                   :name (str v 0)\n                   :min lo\n                   :max hi\n                   :value hi-v\n                   :step lo\n                   :on-change #(swap! state assoc-in [:range v 1] (event-value %))}]\n          [:span {:style {:width \"2em\" :display \"inline-block\" :text-align \"right\"}} hi]])])))\n\n(defn- superformula-inputs []\n  (into {}\n    (for [[k range'] (:range @state)]\n      [k (apply uniform k range')])))\n\n(let [W 100\n      H 100]\n  (defn superformula-path [& [inputs]]\n    (let [inputs (or inputs (superformula-inputs))]\n      (let [pts   (geom/superformula-points [0 0] inputs)\n        pth       (pc/roundPath (pc/normalizePath (clj->js (partition 3 (spline/pts->path pts)))) 6)\n        {w :width\n         h :height\n         x :x\n         y :y}     (js->clj (pc/getPathBBox pth) :keywordize-keys true)\n        scale      (cond-> (min (/ W w) (/ H h)) (or (< W w) (< H h)) -)\n        trans-x    (min 50 (abs (- (/ (- W w) 2) x)))\n        trans-y    (min 50 (abs (- (/ (- H h) 2) y)))]\n    (-> pth\n        (pc/transformPath #js {:translate #js [trans-x trans-y]\n                               :scale     scale})\n        pc/pathToString)))))\n\n(defn superformula-svg [{[id0 id1] :path-ids [a0 a1] :path-atoms [in0 in1] :inputs}]\n  (let [p0 (superformula-path)]\n    (fn []\n      [:svg {:viewBox \"0 0 100 100\"}\n       [:path {:ref (partial reset! a0)\n               :id  id0\n               :d   p0}]\n       [:path {:style {:visibility \"hidden\"}\n               :ref (partial reset! a1)\n               :id  id1\n               :d   (superformula-path @in1)}]])))\n\n(defn tweener [n1 p0 n2 p1 t? cb]\n  (when (and @p0 @p1 (not @t?))\n    (r/with-let [tween (kute/to (str \"#\" n1)\n                                #js {:path (str \"#\" n2)}\n                                #js {:duration   1000\n                                     :easing     \"easingCubicOut\"\n                                     :onComplete (fn []\n                                                   (reset! t? false)\n                                                   (cb))})]\n      (reset! t? true)\n      (.start tween)))\n  [:<>])\n\n(defn home-page []\n  (r/with-let [iter (r/cursor state [:iter])\n               p0   (r/cursor state [:path-refs 0])\n               p1   (r/cursor state [:path-refs 1])\n               in0  (r/cursor state [:inputs 0])\n               in1  (r/cursor state [:inputs 1])\n               t?   (r/cursor state [:tweening?])]\n\n    [:div\n     [sliders]\n     [superformula-svg {:path-ids [\"visible\" \"invisible\"] :path-atoms [p0 p1] :inputs [in0 in1]}]\n     [tweener \"visible\" p0 \"invisible\" p1 t? (fn []\n                                               (let [v (swap! state update :iter inc)]\n                                                 (when (pos? (mod (:iter v) 2))\n                                                   (reset! in1 (superformula-inputs)))))]]))\n\n\n(defn mount-root []\n  (d/render [home-page] (.getElementById js/document \"app\")))\n\n(defn ^:export init! []\n  (mount-root))\n"]}